# Sisyphusã¸ã®æŒ‡ç¤ºï¼ˆå¿…èª­ï¼‰

> **å‚ç…§å…ƒ**: implement-issues.md ã‹ã‚‰åˆ†é›¢ã•ã‚ŒãŸSisyphuså°‚ç”¨å®Ÿè¡ŒæŒ‡ç¤º
> **ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯Sisyphuså°‚ç”¨ã®å®Ÿè¡ŒæŒ‡ç¤ºã§ã™ã€‚ä¸Šè¨˜ãƒ«ãƒ¼ãƒ«ã®è¦ç´„ç‰ˆã€‚**

---

## ğŸ”„ å®Ÿè£…ãƒ•ãƒ­ãƒ¼

```
1. Issueå—é ˜
     â†“
2. ã€å˜ä¸€IssueæŒ‡å®šæ™‚ã€‘Subtaskè‡ªå‹•æ¤œå‡º â˜…é‡è¦â˜…
     â”œâ”€ Subtaskã‚ã‚Š â†’ Step 3ã¸ï¼ˆSubtaskå˜ä½ã§å®Ÿè£…ï¼‰
     â””â”€ Subtaskãªã— â†’ ç²’åº¦ãƒã‚§ãƒƒã‚¯ã¸ï¼ˆStep 4ã¸ï¼‰
     â†“
3. ç²’åº¦ãƒã‚§ãƒƒã‚¯ï¼ˆ200è¡Œä»¥ä¸‹ã‹?ï¼‰
     â”œâ”€ Noï¼ˆå¤§ãã„ï¼‰â†’ `/decompose-issue` ã‚’å®Ÿè¡Œã—ã¦ã‹ã‚‰å†åº¦å‘¼ã³å‡ºã—
     â””â”€ Yesï¼ˆé©åˆ‡ï¼‰â†’ å®Ÿè£…é–‹å§‹
     â†“
4. å„Subtaskã‚’é †æ¬¡å®Ÿè£…ï¼ˆcontainer-workerï¼‰
     â€» å„SubtaskãŒç‹¬ç«‹ã—ãŸå®Ÿè£…ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œ:
        ãƒ–ãƒ©ãƒ³ãƒ â†’ ç’°å¢ƒ â†’ TDD â†’ ãƒ¬ãƒ“ãƒ¥ãƒ¼(9ç‚¹ä»¥ä¸Šã¾ã§ãƒ«ãƒ¼ãƒ—) â†’ PR
     â†“
5. CIç›£è¦– â†’ ãƒãƒ¼ã‚¸ï¼ˆå„PRå˜ä½ï¼‰
     â†“
6. æ¬¡ã®Subtaskã¸ï¼ˆStep 4ã«æˆ»ã‚‹ï¼‰
     â†“
7. å…¨Subtaskå®Œäº† â†’ è¦ªIssueè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚º
```

---

## å®Ÿè£…ãƒ•ãƒ­ãƒ¼ã®å˜ä½

| çŠ¶æ³ | å®Ÿè£…å˜ä½ | ä½œæˆã•ã‚Œã‚‹ã‚‚ã® |
|------|---------|---------------|
| Subtaskãªã— | Issueå˜ä½ | 1ãƒ–ãƒ©ãƒ³ãƒã€1ç’°å¢ƒã€1ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ«ãƒ¼ãƒ—ã€1PR |
| Subtaskã‚ã‚Š | **Subtaskå˜ä½** | **Nå€‹ã®ãƒ–ãƒ©ãƒ³ãƒã€Nå€‹ã®ç’°å¢ƒã€Nå€‹ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ«ãƒ¼ãƒ—ã€Nå€‹ã®PR** |

---

## å„Subtaskã§å®Ÿè¡Œã•ã‚Œã‚‹å®Œå…¨ãƒ•ãƒ­ãƒ¼

```
Subtask #N:
  ãƒ–ãƒ©ãƒ³ãƒä½œæˆ â†’ container-useç’°å¢ƒ
       â†“
  TDDå®Ÿè£… (Red â†’ Green â†’ Refactor)
       â†“
  å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼ â†â”€â”€â”€â”€â”€â”€â”
       â†“             â”‚
  9ç‚¹ä»¥ä¸Š? â”€â”€Noâ”€â”€â”€â”€â†’ ä¿®æ­£ï¼ˆæœ€å¤§3å›ï¼‰
       â†“ Yes
  ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª
       â†“
  PRä½œæˆ â†’ CIç›£è¦– â†’ ãƒãƒ¼ã‚¸ â†’ ç’°å¢ƒå‰Šé™¤
       â†“
  âœ… ã“ã®Subtaskå®Œäº† â†’ æ¬¡ã®Subtaskã¸
```

---

## âš¡ Subtaskè‡ªå‹•æ¤œå‡ºï¼ˆå˜ä¸€IssueæŒ‡å®šæ™‚ã¯å¿…é ˆï¼‰

> **âš ï¸ é‡è¦**: SubtaskãŒã‚ã‚‹å ´åˆã€**å„Subtaskã”ã¨ã«ç‹¬ç«‹ã—ãŸfeatureãƒ–ãƒ©ãƒ³ãƒãƒ»container-useç’°å¢ƒãƒ»PR**ã‚’ä½œæˆã™ã‚‹ã€‚

è©³ç´°ã¯ [Subtaskæ¤œå‡º & ä¾å­˜é–¢ä¿‚è§£æ±º](./subtask-detection.md) ã‚’å‚ç…§ã€‚

---

## ç²’åº¦åˆ¤å®šï¼ˆå®Ÿè£…é–‹å§‹å‰ã«å¿…é ˆï¼‰

| æ¨å®šã‚³ãƒ¼ãƒ‰é‡ | å¯¾å¿œ |
|-------------|------|
| **200è¡Œä»¥ä¸‹** | â†’ ãã®ã¾ã¾å®Ÿè£… |
| **200è¡Œè¶…** | â†’ **`/decompose-issue` ã§åˆ†å‰²ã—ã¦ã‹ã‚‰å†å®Ÿè¡Œ** |

è©³ç´°ã¯ [Issueç²’åº¦åˆ¤å®š](./issue-size-estimation.md) ã‚’å‚ç…§ã€‚

---

## å®Ÿè£…ãƒ•ãƒ­ãƒ¼ï¼ˆåˆ†å²æ¡ä»¶ï¼‰

| çŠ¶æ³ | å‡¦ç†æ–¹æ³• | ä½œæˆã•ã‚Œã‚‹ã‚‚ã® |
|------|---------|---------------|
| **Subtaskã‚ã‚Š** | å„Subtaskå˜ä½ã§**é †æ¬¡**å®Ÿè£… | Subtaskæ•° Ã— (ãƒ–ãƒ©ãƒ³ãƒ + ç’°å¢ƒ + PR) |
| **Subtaskãªã— + 200è¡Œä»¥ä¸‹** | Issueå˜ä½ã§ç›´æ¥å®Ÿè£… | 1ãƒ–ãƒ©ãƒ³ãƒ + 1ç’°å¢ƒ + 1PR |
| **Subtaskãªã— + 200è¡Œè¶…** | `/decompose-issue` ã§åˆ†å‰² | - |
| **è¤‡æ•°è¦ªIssueæŒ‡å®š** | å„è¦ªIssueå˜ä½ã§**ä¸¦åˆ—**å®Ÿè£… | è¦ªIssueæ•° Ã— (Subtaskæ•° Ã— ãƒ–ãƒ©ãƒ³ãƒ + ç’°å¢ƒ + PR) |

---

## Phaseåˆ¥ã®è²¬ä»»åˆ†æ‹…

> **Note**: ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ¼ã¯**Issueå˜ä½ã§ã‚‚Subtaskå˜ä½ã§ã‚‚åŒä¸€**ã€‚

| Phase | å®Ÿè¡Œè€… | å†…å®¹ |
|-------|--------|------|
| **0. ãƒ–ãƒ©ãƒ³ãƒä½œæˆ** | Sisyphus | å„Subtaskå®Ÿè£…é–‹å§‹æ™‚ã«featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ |
| **1-9. å®Ÿè£…â†’PR** | container-worker | ç’°å¢ƒæ§‹ç¯‰ã€TDDã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€PRä½œæˆï¼ˆ1 Subtaskãšã¤ï¼‰ |
| **10-11. CIâ†’ãƒãƒ¼ã‚¸** | Sisyphus | CIç›£è¦–ã€ãƒãƒ¼ã‚¸ã€ç’°å¢ƒå‰Šé™¤ï¼ˆå„PRå˜ä½ï¼‰ |
| **12. è¦ªIssueã‚¯ãƒ­ãƒ¼ã‚º** | Sisyphus | å…¨Subtaskå®Œäº†ç¢ºèªã€è¦ªIssueè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚º |

---

## Subtaské †æ¬¡å®Ÿè£…æ™‚ã®å…¨ä½“åƒ

```
Sisyphus (è¦ªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)
â”‚
â”œâ”€â”€ Subtask #9 ã‚’å‡¦ç†
â”‚   â”œâ”€â”€ Phase 0: ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (feature/issue-9-data-types)
â”‚   â”œâ”€â”€ Phase 1-9: container-worker â†’ å®Ÿè£… â†’ PR #25
â”‚   â””â”€â”€ Phase 10-11: CIç›£è¦– â†’ ãƒãƒ¼ã‚¸ â†’ ç’°å¢ƒå‰Šé™¤
â”‚       â†“ (å®Œäº†å¾Œ)
â”œâ”€â”€ Subtask #10 ã‚’å‡¦ç†
â”‚   â”œâ”€â”€ Phase 0: ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (feature/issue-10-timer-engine)
â”‚   â”œâ”€â”€ Phase 1-9: container-worker â†’ å®Ÿè£… â†’ PR #26
â”‚   â””â”€â”€ Phase 10-11: CIç›£è¦– â†’ ãƒãƒ¼ã‚¸ â†’ ç’°å¢ƒå‰Šé™¤
â”‚       â†“ (å®Œäº†å¾Œ)
â””â”€â”€ Phase 12: å…¨Subtaskå®Œäº† â†’ è¦ªIssueè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚º
```

---

## â›” å¿…é ˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

```
â–¡ ã€å˜ä¸€IssueæŒ‡å®šæ™‚ã€‘Subtaskæ¤œå‡ºã‚’å®Ÿè¡Œã—ãŸã‹? â˜…æœ€å„ªå…ˆâ˜…
â–¡ Issueç²’åº¦ãƒã‚§ãƒƒã‚¯ï¼ˆ200è¡Œä»¥ä¸‹ã‹?ï¼‰
â–¡ å¤§ãã„å ´åˆã¯ `/decompose-issue` ã‚’æ¡ˆå†…ã—ãŸã‹?
â–¡ ã€Subtaskã‚ã‚Šã€‘å„Subtaskã«ç‹¬ç«‹ã—ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆã—ãŸã‹? â˜…é‡è¦â˜…
â–¡ ã€Subtaskã‚ã‚Šã€‘å„Subtaskã«ç‹¬ç«‹ã—ãŸcontainer-useç’°å¢ƒã‚’ä½œæˆã—ãŸã‹? â˜…é‡è¦â˜…
â–¡ ã€Subtaskã‚ã‚Šã€‘å„Subtaskã§ç‹¬ç«‹ã—ãŸãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ«ãƒ¼ãƒ—ã‚’å®Ÿè¡Œã—ãŸã‹? â˜…é‡è¦â˜…
â–¡ ã€Subtaskã‚ã‚Šã€‘å„Subtaskã«ç‹¬ç«‹ã—ãŸPRã‚’ä½œæˆã—ãŸã‹? â˜…é‡è¦â˜…
â–¡ ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‘å„SubtaskãŒ9ç‚¹ä»¥ä¸Šã‚’ç²å¾—ã™ã‚‹ã¾ã§ãƒ«ãƒ¼ãƒ—ã—ãŸã‹?
â–¡ background_task ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‹?ï¼ˆâ›” task ç¦æ­¢ï¼‰
â–¡ Subtaskã¯é †æ¬¡å‡¦ç†ã—ã¦ã„ã‚‹ã‹?ï¼ˆ1ã¤å®Œäº†ã—ã¦ã‹ã‚‰æ¬¡ã¸ï¼‰
â–¡ å…¨Subtaskå®Œäº†å¾Œã€è¦ªIssueã‚’ã‚¯ãƒ­ãƒ¼ã‚ºã—ãŸã‹?
```

---

## ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ãƒ«ãƒ¼ãƒ«

| æ“ä½œ | ä½¿ç”¨ãƒ„ãƒ¼ãƒ« | å‚™è€ƒ |
|------|-----------|------|
| container-workerèµ·å‹• | `background_task` | â›” `task` ç¦æ­¢ï¼ˆMCPãƒ„ãƒ¼ãƒ«ç¶™æ‰¿ã•ã‚Œãªã„ï¼‰ |
| å“è³ªãƒ¬ãƒ“ãƒ¥ãƒ¼èµ·å‹• | `task` | âœ… OKï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯MCPä¸è¦ï¼‰ |
| ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ | `container-use_environment_file_*` | â›” `edit`/`write` ç¦æ­¢ |
| ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ | `container-use_environment_run_cmd` | â›” `bash` ã§ã®ãƒ†ã‚¹ãƒˆ/ãƒ“ãƒ«ãƒ‰ç¦æ­¢ |
| CIç›£è¦–ãƒ»ãƒãƒ¼ã‚¸ | `bash` (gh ã‚³ãƒãƒ³ãƒ‰) | âœ… OKï¼ˆç’°å¢ƒå¤–ã®GitHub APIæ“ä½œï¼‰ |
| è¦ªIssueã‚¯ãƒ­ãƒ¼ã‚º | `bash` (gh issue close) | å…¨Subtaskå®Œäº†å¾Œ |

---

## â›” ã‚ˆãã‚ã‚‹é–“é•ã„

| âŒ é–“é•ã„ | âœ… æ­£ã—ã„æ–¹æ³• |
|----------|-------------|
| **å˜ä¸€IssueæŒ‡å®šæ™‚ã«Subtaskæ¤œå‡ºã‚’ã‚¹ã‚­ãƒƒãƒ—** | **å¿…ãš `detect_subtasks()` ã‚’å®Ÿè¡Œ** |
| è¦ªIssueã‚’ãã®ã¾ã¾Subtaskãªã—ã§å®Ÿè£…é–‹å§‹ | ã¾ãšSubtaskæ¤œå‡º â†’ ãªã‘ã‚Œã°ç²’åº¦ãƒã‚§ãƒƒã‚¯ |
| **Subtaskå…¨ä½“ã§1ã¤ã®ãƒ–ãƒ©ãƒ³ãƒã‚’å…±æœ‰** | **å„Subtaskã”ã¨ã«ç‹¬ç«‹ã—ãŸfeatureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ** |
| **Subtaskå…¨ä½“ã§1ã¤ã®PRã‚’ä½œæˆ** | **å„Subtaskã”ã¨ã«ç‹¬ç«‹ã—ãŸPRã‚’ä½œæˆ** |
| **Subtaskå…¨ä½“ã§1ã¤ã®container-useç’°å¢ƒã‚’å…±æœ‰** | **å„Subtaskã”ã¨ã«ç‹¬ç«‹ã—ãŸç’°å¢ƒã‚’ä½œæˆ** |
| **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦PRä½œæˆ** | **å„Subtaskã§9ç‚¹ä»¥ä¸Šã«ãªã‚‹ã¾ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ«ãƒ¼ãƒ—** |
| **ãƒ¬ãƒ“ãƒ¥ãƒ¼1å›ã§è«¦ã‚ã¦PRä½œæˆ** | **æœ€å¤§3å›ã¾ã§ãƒªãƒˆãƒ©ã‚¤ã€ãã‚Œã§ã‚‚å¤±æ•—ãªã‚‰Draft PR** |
| å¤§ããªIssueã‚’ãã®ã¾ã¾å®Ÿè£… | `/decompose-issue` ã§åˆ†å‰²ã—ã¦ã‹ã‚‰å®Ÿè£… |
| `task(subagent_type="container-worker", ...)` | `background_task(agent="container-worker", ...)` |
| Subtaskã‚’ä¸¦åˆ—å®Ÿè¡Œ | Subtaskã¯é †æ¬¡å®Ÿè¡Œï¼ˆ1ã¤å®Œäº†ã—ã¦ã‹ã‚‰æ¬¡ã¸ï¼‰ |
| å…¨Subtaskå®Œäº†å¾Œã€è¦ªIssueã‚’æ”¾ç½® | å¿…ãšè‡ªå‹•ã‚¯ãƒ­ãƒ¼ã‚ºå‡¦ç†ã‚’å®Ÿè¡Œ |

---

## å®Œäº†å ±å‘Šãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```markdown
## ğŸ“‹ å®Ÿè£…å®Œäº†ã‚µãƒãƒªãƒ¼

### è¦ªIssue
- **#{parent_id}**: {parent_title} â†’ âœ… Closed

### Subtaskçµæœ

| Subtask | ãƒ–ãƒ©ãƒ³ãƒ | ç’°å¢ƒID | ãƒ¬ãƒ“ãƒ¥ãƒ¼ | PR | CI | ãƒãƒ¼ã‚¸ |
|---------|---------|--------|---------|-----|-----|-------|
| #{s1} | feature/issue-{s1}-xxx | env-aaa | 10/10 (1å›ç›®) | PR #{p1} | âœ… | âœ… |
| #{s2} | feature/issue-{s2}-xxx | env-bbb | 9/10 (2å›ç›®) | PR #{p2} | âœ… | âœ… |

### çµ±è¨ˆ
- ç·Subtaskæ•°: N
- æˆåŠŸ: N
- å¤±æ•—: 0
- ãƒ¬ãƒ“ãƒ¥ãƒ¼å¹³å‡ã‚¹ã‚³ã‚¢: X.X/10

### ç’°å¢ƒã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- âœ… env-aaa å‰Šé™¤æ¸ˆã¿
- âœ… env-bbb å‰Šé™¤æ¸ˆã¿
```
